**STREAMS, REDIRECTION VÀ PIPES**(*)

**A. Các loại stream trong Linux**

*Stream là kênh truyền tải dữ liệu liên tục mà có thể được đọc hoặc ghi từ một nguồn (như tệp, thiết bị, hay dữ liệu từ mạng). Stream có thể được hiểu như một đường dẫn dữ liệu với khả năng xử lý tuần tự các byte dữ liệu mà không cần phải quan tâm đến vị trí hoặc kích thước của chúng.. Standard Input (stdin), Standard Output (stdout) và Standard Error (stderr) là ba luồng (streams) chính để giao tiếp giữa người dùng và hệ thống, được sử dụng rộng rãi trong việc quản lý đầu vào, đầu ra, và xử lý lỗi khi thực thi các lệnh.*

*1. Standard Input (stdin)*
- Mã đại diện: 0
- Mô tả : stdin là dòng nhập liệu tiêu chuẩn, đại diện cho nơi để nhận dữ liệu đầu vào từ người dùng hoặc từ một nguồn khác . Khi chạy một chương trình từ terminal, chương trình đó sẽ mặc định nhận dữ liệu từ stdin. Nếu chương trình yêu cầu nhập liệu từ người dùng, nó sẽ chờ người dùng gõ thông tin vào dòng lệnh và sau đó nhận thông tin đó qua stdin. stdin có thể được thay đổi, ví dụ bằng cách chuyển hướng từ một tệp, một lệnh khác hoặc một nguồn dữ liệu khác.
- Cách sử dụng:
  - Khi khởi chạy lệnh cat trong terminal,lệnh sẽ yêu cầu nhập nội dung từ bàn phím. Trong trường hợp này, stdin nhận và đọc dữ liệu từ nguồn (bàn phím) rồi xuất ra màn hình
Dữ liệu đầu ra: Sau khi chương trình đọc dữ liệu từ tệp, nó sẽ xuất dữ liệu này ra output stream (stdout, ở đây là màn hình terminal).
  - Chuyển hướng stdin: có thể chuyển dữ liệu từ một tệp vào stdin của một chương trình thay vì nhập thủ công: cat < file.txt

*2. Standard Output (stdout)*
- Mã đại diện: 1
- Mục đích sử dụng: stdout là dòng xuất ra tiêu chuẩn, đaị diện cho nơi để xuất dữ liệu từ chương trình (màn hình terminal hoặc một đích khác). Khi một chương trình hoàn thành một tác vụ, kết quả của tác vụ đó (thường là thông báo thành công, thông tin, hoặc dữ liệu) sẽ được xuất qua stdout.
- Cách sử dụng:
  - Xuất dữ liệu ra terminal: Khi nhập lệnh echo "Hello, world!", dữ liệu vừa nhập sẽ được tiếp nhận bởi stdout rồi ghi vào đích (terminal).
  - Chuyển hướng stdout vào tệp: Dùng > để ghi kết quả vào tệp thay vì hiển thị trên màn hình. Ví dụ: ls > output.txt

*3. Standard Error (stderr)*
- Mã đại diện: 2
- Mục đích sử dụng: Đây là luồng dành cho các thông báo lỗi từ các lệnh hoặc chương trình.

Cách sử dụng:
- Hiển thị lỗi ra màn hình: Khi có lỗi xảy ra, stderr sẽ gửi thông báo lỗi ra màn hình. Ví dụ: ls /nonexistent_directory

=> Nếu thư mục không tồn tại, một thông báo lỗi sẽ xuất hiện.
- Chuyển hướng stderr vào tệp: Dùng 2> để ghi thông báo lỗi vào tệp thay vì hiển thị trên màn hình. Ví dụ: ls /nonexistent_directory 2> error.log (Thông báo lỗi sẽ được lưu vào error.log thay vì hiển thị trên màn hình.)

**B. Redirect Input, Output và cách Piping Data giữa các Programs**

*Redirect là cách điều khiển nơi các stream đi vào hoặc đi ra. Chuyển hướng thay đổi điểm đến hoặc nguồn của các stream. Các kỹ thuật chuyển hướng phổ biến trong Linux gồm:*

*1. Redirect Output*

>: Chuyển hướng stdout sang một file. Nếu file đã tồn tại, nó sẽ bị ghi đè.

    Ví dụ: echo "Hello" > output.txt sẽ ghi "Hello" vào file output.txt.

>>: Chuyển hướng stdout sang một file và thêm vào cuối file.

    Ví dụ: echo "Hello again" >> output.txt sẽ thêm "Hello again" vào cuối output.txt.

2>: Chuyển hướng stderr sang một file.

    Ví dụ: ls non_existing_file 2> error.txt sẽ ghi lỗi vào error.txt.

*2. Redirect Input*

<: Chuyển hướng stdin từ một file thay vì nhập từ bàn phím.

    Ví dụ: cat < input.txt sẽ đọc dữ liệu từ input.txt thay vì từ bàn phím.
    
*3. Piping Data giữa các Programs*

- Mục đích sử dụng: Giúp kết nối đầu ra của một chương trình với đầu vào của chương trình khác thông qua ký tự '|'.
  
*Các cách sử dụng:*

a.Tìm kiếm tệp
- VÍ DỤ: Sử dụng ls để liệt kê các tệp và sau đó dùng grep để tìm kiếm một tệp cụ thể: ls | grep "file.txt"

=> Lệnh trên sẽ liệt kê tất cả các tệp trong thư mục hiện tại và chỉ hiển thị tệp có tên file.txt.

b. Đếm Số Dòng
- VÍ DỤ: Kết hợp cat và wc -l để đếm số dòng trong một tệp: cat file.txt | wc -l

=> Ở đây, cat file.txt đọc nội dung của file.txt và wc -l đếm số dòng trong đầu ra đó.

c. Sắp Xếp và Xóa Duplicates
- VÍ DỤ: Đọc một tệp, sắp xếp nội dung, và loại bỏ các dòng trùng lặp: cat list.txt | sort | uniq

=> Lệnh này sẽ hiển thị danh sách các mục duy nhất trong list.txt.

d. Kiểm Tra Tiến Trình
- VÍ DỤ: Sử dụng ps để liệt kê các tiến trình và grep để tìm kiếm một tiến trình cụ thể: ps aux | grep "nginx"

=> Lệnh này sẽ tìm kiếm trong danh sách các tiến trình hiện tại để xem thông tin về tiến trình nginx.

e. Kết Hợp Nhiều Lệnh
- VÍ DỤ: Đọc tệp, tìm kiếm từ khóa, sắp xếp và loại bỏ trùng lặp: cat file.txt | grep "keyword" | sort | uniq
